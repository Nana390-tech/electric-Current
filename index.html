<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP 0103 - Electric Current - Reading 6 | Higher Colleges of Technology</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel Standalone for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        code {
            font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .animate-spin {
            animation: spin 1s linear infinite;
        }

        .animate-bounce {
            animation: bounce 1s ease-in-out infinite;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef } = React;
        
        // Import Lucide icons
        const Zap = lucide.Zap;
        const Award = lucide.Award;
        const Star = lucide.Star;
        const CheckCircle = lucide.CheckCircle;
        const XCircle = lucide.XCircle;
        const RefreshCw = lucide.RefreshCw;
        const Trophy = lucide.Trophy;
        const Download = lucide.Download;

        // Create Icon components
        const Icon = ({ icon: LucideIcon, ...props }) => {
            const ref = useRef(null);
            
            React.useEffect(() => {
                if (ref.current) {
                    lucide.createElement(LucideIcon).then(iconElement => {
                        ref.current.innerHTML = '';
                        ref.current.appendChild(iconElement);
                    });
                }
            }, [LucideIcon]);
            
            return React.createElement('i', { ref, ...props });
        };

        const ElectricCurrentLesson = () => {
          const [currentActivity, setCurrentActivity] = useState(0);
          const [points, setPoints] = useState(0);
          const [completedActivities, setCompletedActivities] = useState([]);
          
          // Activity 1 State
          const [activity1Answers, setActivity1Answers] = useState({
            word1: '', word2: '', word3: '', word4: '', word5: '', word6: '', word7: '', word8: '', word9: ''
          });
          const [activity1Checked, setActivity1Checked] = useState(false);
          const [activity1Score, setActivity1Score] = useState(null);
          const [selectedBlank1, setSelectedBlank1] = useState(null);
          
          // Activity 2 State
          const [activity2Answers, setActivity2Answers] = useState({
            a: '', b: '', c: ''
          });
          const [activity2Checked, setActivity2Checked] = useState(false);
          const [activity2Score, setActivity2Score] = useState(null);
          
          // Activity 3 State
          const [activity3Answers, setActivity3Answers] = useState({});
          const [activity3Checked, setActivity3Checked] = useState(false);
          const [activity3Score, setActivity3Score] = useState(null);
          
          // Activity 4 State
          const [activity4Answers, setActivity4Answers] = useState({});
          const [activity4Checked, setActivity4Checked] = useState(false);
          const [activity4Score, setActivity4Score] = useState(null);
          const [showFlashcards, setShowFlashcards] = useState(true);
          const [flippedCards, setFlippedCards] = useState({});
          const [selectedBlank4, setSelectedBlank4] = useState(null);
          
          // Activity 5 State
          const [activity5Checked, setActivity5Checked] = useState(false);
          const [activity5Score, setActivity5Score] = useState(null);
          
          // Activity 6 State
          const [activity6Answers, setActivity6Answers] = useState({
            para1: '', para2: '', para3: ''
          });
          const [activity6Checked, setActivity6Checked] = useState(false);
          const [activity6Score, setActivity6Score] = useState(null);
          
          // Activity 7 State
          const [activity7Answers, setActivity7Answers] = useState({});
          const [activity7Checked, setActivity7Checked] = useState(false);
          const [activity7Score, setActivity7Score] = useState(null);

          // Define word counts first
          const activity1WordCounts = {
            'atom': 2,
            'protons': 2,
            'neutrons': 2,
            'electrons': 2,
            'Atoms': 1
          };

          const activity4WordCounts = {
            'current': 5,
            'power': 1,
            'wires': 2,
            'appliances': 1,
            'generators': 1,
            'magnet': 1,
            'wire': 2,
            'electrons': 1,
            'outlets': 1,
            'plugs in': 1,
            'device': 2
          };

          // Word banks and data
          const activity1WordBank = ['atom', 'protons', 'neutrons', 'electrons', 'Atoms'];
          
          const activity2Correct = {
            a: 'protons', b: 'electrons', c: 'Neutrons'
          };

          const activity3Questions = [
            { num: 1, options: ['Electricity', 'Lightning'], correct: 'Electricity' },
            { num: 2, options: ['neutrons', 'electrons'], correct: 'electrons' },
            { num: 3, options: ['wire', 'energy'], correct: 'energy' },
            { num: 4, options: ['flow', 'charge'], correct: 'flow' },
            { num: 5, options: ['light bulbs', 'electricity'], correct: 'electricity' },
            { num: 6, options: ['lightning', 'power'], correct: 'lightning' },
            { num: 7, options: ['electrons', 'batteries'], correct: 'electrons' },
            { num: 8, options: ['switch', 'energy'], correct: 'energy' },
            { num: 9, options: ['power', 'generate'], correct: 'generate' },
            { num: 10, options: ['wires', 'batteries'], correct: 'wires' },
            { num: 11, options: ['energy', 'power'], correct: 'power' },
            { num: 12, options: ['provides', 'switches'], correct: 'provides' },
            { num: 13, options: ['universe', 'battery'], correct: 'universe' },
            { num: 14, options: ['wires', 'atoms'], correct: 'atoms' },
            { num: 15, options: ['positive', 'negative'], correct: 'negative' },
            { num: 16, options: ['power', 'charge'], correct: 'charge' },
            { num: 17, options: ['positive', 'neutron'], correct: 'positive' },
            { num: 18, options: ['switches', 'charges'], correct: 'charges' },
            { num: 19, options: ['Electrical', 'Electricity'], correct: 'Electricity' },
            { num: 20, options: ['electrons', 'neutrons'], correct: 'electrons' }
          ];

          const activity4WordBank = ['appliances', 'current', 'device', 'electrons', 'generators', 'magnet', 'outlets', 'plugs in', 'power', 'wire', 'wires'];

          const activity4Blanks = [
            'current', 'power', 'current', 'wires', 'appliances', 'generators',
            'current', 'magnet', 'wire', 'electrons', 'wire', 'wires',
            'current', 'outlets', 'plugs in', 'device', 'current', 'device'
          ];

          const vocabularyCards = [
            { word: 'current', meaning: 'the flow of electricity through a wire', arabic: 'ÿ™Ÿäÿßÿ±' },
            { word: 'power', meaning: 'energy supplied to operate electrical devices', arabic: 'ÿ∑ÿßŸÇÿ©' },
            { word: 'wire', meaning: 'a thin metal thread that carries electricity', arabic: 'ÿ≥ŸÑŸÉ' },
            { word: 'appliance', meaning: 'an electrical device used in the home', arabic: 'ÿ¨Ÿáÿßÿ≤' },
            { word: 'generator', meaning: 'a machine that produces electricity', arabic: 'ŸÖŸàŸÑÿØ' },
            { word: 'magnet', meaning: 'an object that produces a magnetic field', arabic: 'ŸÖÿ∫ŸÜÿßÿ∑Ÿäÿ≥' },
            { word: 'electron', meaning: 'a tiny particle with negative charge', arabic: 'ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜ' },
            { word: 'device', meaning: 'a piece of electrical equipment', arabic: 'ÿ¨Ÿáÿßÿ≤' },
            { word: 'plug in', meaning: 'to connect equipment to electricity supply', arabic: 'ŸäŸàÿµŸÑ ÿ®ÿßŸÑŸÉŸáÿ±ÿ®ÿßÿ°' },
            { word: 'outlet', meaning: 'a socket where plugs connect to electricity', arabic: 'ŸÖŸÇÿ®ÿ≥' }
          ];

          const activity6Headings = [
            'What is electricity?',
            'How electricity works.',
            'Generating electricity.'
          ];

          const activity6Correct = {
            para1: 'What is electricity?',
            para2: 'How electricity works.',
            para3: 'Generating electricity.'
          };

          const activity7Questions = [
            {
              id: 1,
              question: "What is electricity?",
              options: ["The flow of electrons", "The flow of water", "The flow of air", "The flow of light"],
              correct: "The flow of electrons"
            },
            {
              id: 2,
              question: "Where can we see electricity in nature?",
              options: ["In lightning", "In rain", "In wind", "In snow"],
              correct: "In lightning"
            },
            {
              id: 3,
              question: "What is lightning?",
              options: ["Many electrons moving through air", "Water falling from clouds", "Wind blowing fast", "Clouds touching each other"],
              correct: "Many electrons moving through air"
            },
            {
              id: 4,
              question: "How do scientists send electricity to our homes?",
              options: ["Through wires", "Through the air", "Through water pipes", "Through the ground"],
              correct: "Through wires"
            },
            {
              id: 5,
              question: "What does electricity power in the modern world?",
              options: ["Heaters, light bulbs, and computers", "Only light bulbs", "Only heaters", "Only computers"],
              correct: "Heaters, light bulbs, and computers"
            }
          ];

          // Check functions
          const checkActivity1 = () => {
            let correct = 0;
            
            if (activity1Answers.word1 === 'atom') correct++;
            
            const threeParts = [activity1Answers.word2, activity1Answers.word3, activity1Answers.word4];
            const threePartsCorrect = ['protons', 'neutrons', 'electrons'];
            const threePartsSet = new Set(threeParts);
            if (threePartsSet.size === 3 && threePartsCorrect.every(word => threePartsSet.has(word))) {
              correct += 3;
            }
            
            const nucleusParts = [activity1Answers.word5, activity1Answers.word6];
            const nucleusPartsCorrect = ['protons', 'neutrons'];
            const nucleusSet = new Set(nucleusParts);
            if (nucleusSet.size === 2 && nucleusPartsCorrect.every(word => nucleusSet.has(word))) {
              correct += 2;
            }
            
            if (activity1Answers.word7 === 'atom') correct++;
            if (activity1Answers.word8 === 'electrons') correct++;
            if (activity1Answers.word9 === 'Atoms') correct++;
            
            const percentage = Math.round((correct / 9) * 100);
            setActivity1Score(percentage);
            
            if (percentage >= 75) {
              const earnedPoints = correct * 5;
              setPoints(points + earnedPoints);
              if (!completedActivities.includes(1)) {
                setCompletedActivities([...completedActivities, 1]);
              }
            }
            setActivity1Checked(true);
          };

          const checkActivity2 = () => {
            let correct = 0;
            Object.keys(activity2Correct).forEach(key => {
              if (activity2Answers[key] === activity2Correct[key]) correct++;
            });
            const percentage = Math.round((correct / 3) * 100);
            setActivity2Score(percentage);
            
            if (percentage >= 75) {
              const earnedPoints = correct * 10;
              setPoints(points + earnedPoints);
              if (!completedActivities.includes(2)) {
                setCompletedActivities([...completedActivities, 2]);
              }
            }
            setActivity2Checked(true);
          };

          const checkActivity3 = () => {
            let correct = 0;
            activity3Questions.forEach(q => {
              if (activity3Answers[q.num] === q.correct) correct++;
            });
            const percentage = Math.round((correct / 20) * 100);
            setActivity3Score(percentage);
            
            if (percentage >= 75) {
              const earnedPoints = correct * 5;
              setPoints(points + earnedPoints);
              if (!completedActivities.includes(3)) {
                setCompletedActivities([...completedActivities, 3]);
              }
            }
            setActivity3Checked(true);
          };

          const checkActivity4 = () => {
            let correct = 0;
            activity4Blanks.forEach((word, idx) => {
              if (activity4Answers[idx] === word) correct++;
            });
            const percentage = Math.round((correct / 18) * 100);
            setActivity4Score(percentage);
            
            if (percentage >= 75) {
              const earnedPoints = correct * 5 + 50;
              setPoints(points + earnedPoints);
              if (!completedActivities.includes(4)) {
                setCompletedActivities([...completedActivities, 4]);
              }
            }
            setActivity4Checked(true);
          };

          const checkActivity5 = () => {
            if (!completedActivities.includes(5)) {
              setCompletedActivities([...completedActivities, 5]);
              setPoints(points + 50);
            }
            setActivity5Checked(true);
          };

          const checkActivity6 = () => {
            let correct = 0;
            Object.keys(activity6Correct).forEach(key => {
              if (activity6Answers[key] === activity6Correct[key]) correct++;
            });
            const percentage = Math.round((correct / 3) * 100);
            setActivity6Score(percentage);
            
            if (percentage >= 75) {
              const earnedPoints = correct * 15;
              setPoints(points + earnedPoints);
              if (!completedActivities.includes(6)) {
                setCompletedActivities([...completedActivities, 6]);
              }
            }
            setActivity6Checked(true);
          };

          const checkActivity7 = () => {
            let correct = 0;
            activity7Questions.forEach(q => {
              if (activity7Answers[q.id] === q.correct) correct++;
            });
            const percentage = Math.round((correct / 5) * 100);
            setActivity7Score(percentage);
            
            if (percentage >= 75) {
              const earnedPoints = correct * 10;
              setPoints(points + earnedPoints);
              if (!completedActivities.includes(7)) {
                setCompletedActivities([...completedActivities, 7]);
              }
            }
            setActivity7Checked(true);
          };

          // Retry functions
          const retryActivity1 = () => {
            setActivity1Answers({ word1: '', word2: '', word3: '', word4: '', word5: '', word6: '', word7: '', word8: '', word9: '' });
            setActivity1Checked(false);
            setActivity1Score(null);
            setSelectedBlank1(null);
          };

          const retryActivity2 = () => {
            setActivity2Answers({ a: '', b: '', c: '' });
            setActivity2Checked(false);
            setActivity2Score(null);
          };

          const retryActivity3 = () => {
            setActivity3Answers({});
            setActivity3Checked(false);
            setActivity3Score(null);
          };

          const retryActivity4 = () => {
            setActivity4Answers({});
            setActivity4Checked(false);
            setActivity4Score(null);
            setShowFlashcards(true);
            setFlippedCards({});
            setSelectedBlank4(null);
          };

          const retryActivity5 = () => {
            setShowFlashcards(true);
            setFlippedCards({});
            setActivity5Checked(false);
            setActivity5Score(null);
          };

          const retryActivity6 = () => {
            setActivity6Answers({ para1: '', para2: '', para3: '' });
            setActivity6Checked(false);
            setActivity6Score(null);
          };

          const retryActivity7 = () => {
            setActivity7Answers({});
            setActivity7Checked(false);
            setActivity7Score(null);
          };

          const resetLesson = () => {
            setCurrentActivity(0);
            setPoints(0);
            setCompletedActivities([]);
            setActivity1Answers({ word1: '', word2: '', word3: '', word4: '', word5: '', word6: '', word7: '', word8: '', word9: '' });
            setActivity1Checked(false);
            setActivity1Score(null);
            setSelectedBlank1(null);
            setActivity2Answers({ a: '', b: '', c: '' });
            setActivity2Checked(false);
            setActivity2Score(null);
            setActivity3Answers({});
            setActivity3Checked(false);
            setActivity3Score(null);
            setActivity4Answers({});
            setActivity4Checked(false);
            setActivity4Score(null);
            setShowFlashcards(true);
            setFlippedCards({});
            setSelectedBlank4(null);
            setActivity5Checked(false);
            setActivity5Score(null);
            setActivity6Answers({ para1: '', para2: '', para3: '' });
            setActivity6Checked(false);
            setActivity6Score(null);
            setActivity7Answers({});
            setActivity7Checked(false);
            setActivity7Score(null);
          };

          const certificateRef = useRef(null);

          const downloadCertificate = () => {
            const printWindow = window.open('', '', 'width=800,height=600');
            const certificateHTML = `
              <!DOCTYPE html>
              <html>
              <head>
                <title>Certificate of Completion</title>
                <style>
                  body {
                    font-family: 'Georgia', serif;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    min-height: 100vh;
                    margin: 0;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                  }
                  .certificate {
                    background: white;
                    padding: 60px;
                    border: 20px solid #f4d03f;
                    border-radius: 20px;
                    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
                    text-align: center;
                    max-width: 800px;
                  }
                  .trophy {
                    font-size: 80px;
                    margin-bottom: 20px;
                  }
                  h1 {
                    color: #7c3aed;
                    font-size: 48px;
                    margin: 20px 0;
                    font-weight: bold;
                  }
                  h2 {
                    color: #333;
                    font-size: 32px;
                    margin: 30px 0 10px;
                  }
                  .subtitle {
                    color: #666;
                    font-size: 24px;
                    margin: 10px 0 30px;
                  }
                  .course-title {
                    color: #7c3aed;
                    font-size: 28px;
                    font-weight: bold;
                    margin: 30px 0;
                    padding: 20px;
                    background: #f3f4f6;
                    border-radius: 10px;
                  }
                  .score {
                    font-size: 36px;
                    color: #059669;
                    font-weight: bold;
                    margin: 30px 0;
                    padding: 20px;
                    background: #d1fae5;
                    border-radius: 15px;
                  }
                  .institution {
                    color: #666;
                    font-size: 20px;
                    margin: 30px 0;
                    font-style: italic;
                  }
                  .designer {
                    color: #888;
                    font-size: 18px;
                    margin-top: 40px;
                    border-top: 2px solid #ddd;
                    padding-top: 20px;
                  }
                  .stars {
                    font-size: 40px;
                    color: #f4d03f;
                    margin: 20px 0;
                  }
                  @media print {
                    body {
                      background: white;
                    }
                  }
                </style>
              </head>
              <body>
                <div class="certificate">
                  <div class="trophy">üèÜ</div>
                  <h1>Certificate of Completion</h1>
                  <div class="subtitle">This is to certify that</div>
                  <h2>Student</h2>
                  <div class="subtitle">has successfully completed</div>
                  <div class="course-title">
                    ESP 0103 - Electric Current - Reading 6
                  </div>
                  <div class="score">
                    Final Score: ${points} Points
                  </div>
                  <div class="stars">‚≠ê ‚≠ê ‚≠ê</div>
                  <div class="subtitle">All 7 activities completed with 75% or higher!</div>
                  <div class="institution">Higher Colleges of Technology</div>
                  <div class="designer">Designed by: Nazila Motahari</div>
                </div>
              </body>
              </html>
            `;
            
            printWindow.document.write(certificateHTML);
            printWindow.document.close();
            
            setTimeout(() => {
              printWindow.print();
            }, 250);
          };

          const progressPercentage = (completedActivities.length / 7) * 100;

          const renderBlank = (index, width = 'w-24') => {
            return (
              <input
                type="text"
                value={activity4Answers[index] || ''}
                onClick={() => {
                  if (!activity4Checked) {
                    if (activity4Answers[index]) {
                      const newAnswers = {...activity4Answers};
                      delete newAnswers[index];
                      setActivity4Answers(newAnswers);
                    } else {
                      setSelectedBlank4(index);
                    }
                  }
                }}
                className={`inline-block ${width} px-2 py-1 border-b-2 text-center cursor-pointer ${
                  selectedBlank4 === index ? 'border-blue-500 bg-blue-100' :
                  activity4Checked ? (activity4Answers[index] === activity4Blanks[index] ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50') : 'border-purple-300'
                }`}
                disabled={activity4Checked}
                readOnly
              />
            );
          };

          // Return the main component JSX
          return (
            <div className="min-h-screen bg-gradient-to-br from-blue-100 via-purple-100 to-pink-100 p-8">
              {/* Rest of component continues... Due to length, I'll provide this in a separate file */}
            </div>
          );
        };

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ElectricCurrentLesson />);
    </script>

    <script>
        // Initialize Lucide icons after page load
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
        });
    </script>
</body>
</html>
