<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP 0103 - Electric Current - Reading 6</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        .app-container { min-height: 100vh; background: linear-gradient(135deg, #dbeafe 0%, #f3e8ff 50%, #fce7f3 100%); padding: 2rem; }
        .max-w { max-width: 56rem; margin: 0 auto; }
        .card { background: white; border-radius: 0.5rem; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); padding: 1.5rem; margin-bottom: 1.5rem; }
        .header-title { color: #7e22ce; font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; }
        .text-sm { font-size: 0.875rem; color: #4b5563; }
        .text-xs { font-size: 0.75rem; color: #6b7280; }
        .points { font-size: 1.5rem; font-weight: 700; color: #9333ea; margin-top: 1rem; }
        .progress-bar { width: 100%; background: #e5e7eb; height: 0.75rem; border-radius: 9999px; overflow: hidden; margin-top: 1rem; }
        .progress-fill { background: linear-gradient(to right, #a855f7, #ec4899); height: 100%; transition: width 0.5s; }
        .btn-group { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-top: 1rem; }
        .btn { padding: 0.5rem 1rem; border-radius: 0.5rem; border: none; font-weight: 600; cursor: pointer; transition: all 0.15s; }
        .btn-purple { background: #9333ea; color: white; }
        .btn-purple:hover { background: #7e22ce; }
        .btn-green { background: #16a34a; color: white; }
        .btn-gray { background: #e5e7eb; color: #374151; }
        .btn-gray:hover { background: #d1d5db; }
        .btn-red { background: #ef4444; color: white; }
        .btn-orange { background: #ea580c; color: white; }
        .btn:disabled { background: #d1d5db; color: #9ca3af; cursor: not-allowed; }
        .activity-content { background: white; border-radius: 0.5rem; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); padding: 2rem; min-height: 24rem; }
        .activity-title { font-size: 1.5rem; font-weight: 700; color: #7e22ce; margin-bottom: 1.5rem; }
        .section { background: #eff6ff; padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 1rem; }
        .section-green { background: #f0fdf4; padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 1rem; }
        .section-yellow { background: #fefce8; padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 1rem; }
        .section-indigo { background: #eef2ff; padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 1rem; }
        .section-teal { background: #f0fdfa; padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 1rem; }
        .word-bank { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem; }
        .word-btn { padding: 0.5rem 0.75rem; border-radius: 0.5rem; border: none; font-weight: 600; cursor: pointer; }
        .word-available { background: #9333ea; color: white; }
        .word-unavailable { background: #d1d5db; color: #9ca3af; cursor: not-allowed; }
        .input-blank { display: inline-block; padding: 0.25rem 0.5rem; border: none; border-bottom: 2px solid #d8b4fe; text-align: center; background: transparent; cursor: pointer; }
        .input-blank.selected { border-color: #3b82f6; background: #dbeafe; }
        .input-blank.correct { border-color: #16a34a; background: #f0fdf4; }
        .input-blank.incorrect { border-color: #dc2626; background: #fef2f2; }
        .w-24 { width: 6rem; }
        .w-28 { width: 7rem; }
        .w-32 { width: 8rem; }
        select { width: 100%; padding: 0.5rem; border: 2px solid #d8b4fe; border-radius: 0.5rem; font-size: 1rem; }
        .result-box { padding: 1.5rem; border-radius: 0.5rem; margin-top: 1rem; }
        .result-success { background: #dcfce7; border: 2px solid #22c55e; }
        .result-warning { background: #ffedd5; border: 2px solid #f97316; }
        .text-lg { font-size: 1.125rem; line-height: 1.625; }
        .flashcard { perspective: 1000px; cursor: pointer; height: 12rem; }
        .flashcard-inner { position: relative; width: 100%; height: 100%; transition: transform 0.5s; transform-style: preserve-3d; }
        .flashcard.flipped .flashcard-inner { transform: rotateY(180deg); }
        .flashcard-front, .flashcard-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 0.5rem; padding: 1.5rem; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .flashcard-front { background: #9333ea; color: white; }
        .flashcard-back { background: #3b82f6; color: white; transform: rotateY(180deg); }
        .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
        .word-choice { display: inline-flex; gap: 0.5rem; margin: 0 0.25rem; }
        .choice-btn { padding: 0.25rem 0.5rem; border-radius: 0.25rem; border: 2px solid #d1d5db; font-size: 0.875rem; font-weight: 600; background: white; cursor: pointer; }
        .choice-btn.selected { background: #f3e8ff; border-color: #a855f7; }
        .choice-btn.correct { background: #f0fdf4; border-color: #16a34a; }
        .choice-btn.incorrect { background: #fef2f2; border-color: #dc2626; }
        .quiz-option { width: 100%; text-align: left; padding: 0.75rem 1rem; border-radius: 0.5rem; border: 2px solid #d1d5db; background: white; cursor: pointer; margin-bottom: 0.5rem; }
        .quiz-option:hover:not(:disabled) { border-color: #d8b4fe; background: #fafafa; }
        .quiz-option.selected { background: #f3e8ff; border-color: #a855f7; }
        .quiz-option.correct { background: #f0fdf4; border-color: #16a34a; }
        .quiz-option.incorrect { background: #fef2f2; border-color: #dc2626; }
        .nav-buttons { display: flex; justify-content: space-between; margin-top: 1.5rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-8 { margin-top: 2rem; }
        .font-bold { font-weight: 700; }
        .text-green { color: #16a34a; }
        .text-red { color: #dc2626; }
        .white-bg { background: white; padding: 1rem; border-radius: 0.5rem; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;

        const ElectricCurrentLesson = () => {
            const [currentActivity, setCurrentActivity] = useState(0);
            const [points, setPoints] = useState(0);
            const [completedActivities, setCompletedActivities] = useState([]);
            
            const [activity1Answers, setActivity1Answers] = useState({ word1: '', word2: '', word3: '', word4: '', word5: '', word6: '', word7: '', word8: '', word9: '' });
            const [activity1Checked, setActivity1Checked] = useState(false);
            const [activity1Score, setActivity1Score] = useState(null);
            const [selectedBlank1, setSelectedBlank1] = useState(null);
            
            const [activity2Answers, setActivity2Answers] = useState({ a: '', b: '', c: '' });
            const [activity2Checked, setActivity2Checked] = useState(false);
            const [activity2Score, setActivity2Score] = useState(null);
            
            const [activity3Answers, setActivity3Answers] = useState({});
            const [activity3Checked, setActivity3Checked] = useState(false);
            const [activity3Score, setActivity3Score] = useState(null);
            
            const [activity4Answers, setActivity4Answers] = useState({});
            const [activity4Checked, setActivity4Checked] = useState(false);
            const [activity4Score, setActivity4Score] = useState(null);
            const [showFlashcards, setShowFlashcards] = useState(true);
            const [flippedCards, setFlippedCards] = useState({});
            const [selectedBlank4, setSelectedBlank4] = useState(null);
            
            const [activity6Answers, setActivity6Answers] = useState({ para1: '', para2: '', para3: '' });
            const [activity6Checked, setActivity6Checked] = useState(false);
            const [activity6Score, setActivity6Score] = useState(null);
            
            const [activity7Answers, setActivity7Answers] = useState({});
            const [activity7Checked, setActivity7Checked] = useState(false);
            const [activity7Score, setActivity7Score] = useState(null);

            const activity1WordCounts = { 'atom': 2, 'protons': 2, 'neutrons': 2, 'electrons': 2, 'Atoms': 1 };
            const activity4WordCounts = { 'power': 1, 'generators': 1, 'current': 1, 'wires': 1, 'outlets': 1, 'plug in': 1, 'device': 1, 'appliances': 1, 'magnet': 1, 'coil': 1 };

            const activity1WordBank = ['atom', 'protons', 'neutrons', 'electrons', 'Atoms'];
            const activity2Correct = { a: 'protons', b: 'electrons', c: 'Neutrons' };
            const activity4WordBank = ['appliances', 'coil', 'current', 'device', 'generators', 'magnet', 'outlets', 'plug in', 'power', 'wires'];
            const activity4Blanks = ['power', 'generators', 'current', 'wires', 'outlets', 'plug in', 'device', 'appliances', 'magnet', 'coil'];

            const vocabularyCards = [
                { word: 'power', meaning: 'energy supplied to operate electrical devices', arabic: 'ÿ∑ÿßŸÇÿ©' },
                { word: 'generators', meaning: 'machines that produce electricity', arabic: 'ŸÖŸàŸÑÿØÿßÿ™' },
                { word: 'current', meaning: 'the flow of electricity through a wire', arabic: 'ÿ™Ÿäÿßÿ±' },
                { word: 'wires', meaning: 'thin metal threads that carry electricity', arabic: 'ÿ£ÿ≥ŸÑÿßŸÉ' },
                { word: 'outlets', meaning: 'sockets where plugs connect to electricity', arabic: 'ŸÖŸÇÿßÿ®ÿ≥' },
                { word: 'plug in', meaning: 'to connect equipment to electricity supply', arabic: 'ŸäŸàÿµŸÑ ÿ®ÿßŸÑŸÉŸáÿ±ÿ®ÿßÿ°' },
                { word: 'device', meaning: 'a piece of electrical equipment', arabic: 'ÿ¨Ÿáÿßÿ≤' },
                { word: 'appliances', meaning: 'electrical devices used in the home', arabic: 'ÿ£ÿ¨Ÿáÿ≤ÿ©' },
                { word: 'magnet', meaning: 'an object that produces a magnetic field', arabic: 'ŸÖÿ∫ŸÜÿßÿ∑Ÿäÿ≥' },
                { word: 'coil', meaning: 'wire wound in circles or spirals', arabic: 'ŸÖŸÑŸÅ' }
            ];

            const activity3Questions = [
                { num: 1, options: ['Electricity', 'Lightning'], correct: 'Electricity' },
                { num: 2, options: ['neutrons', 'electrons'], correct: 'electrons' },
                { num: 3, options: ['wire', 'energy'], correct: 'energy' },
                { num: 4, options: ['flow', 'charge'], correct: 'flow' },
                { num: 5, options: ['light bulbs', 'electricity'], correct: 'electricity' },
                { num: 6, options: ['lightning', 'power'], correct: 'lightning' },
                { num: 7, options: ['electrons', 'batteries'], correct: 'electrons' },
                { num: 8, options: ['switch', 'energy'], correct: 'energy' },
                { num: 9, options: ['power', 'generate'], correct: 'generate' },
                { num: 10, options: ['wires', 'batteries'], correct: 'wires' },
                { num: 11, options: ['energy', 'power'], correct: 'power' },
                { num: 12, options: ['provides', 'switches'], correct: 'provides' },
                { num: 13, options: ['universe', 'battery'], correct: 'universe' },
                { num: 14, options: ['wires', 'atoms'], correct: 'atoms' },
                { num: 15, options: ['positive', 'negative'], correct: 'negative' },
                { num: 16, options: ['power', 'charge'], correct: 'charge' },
                { num: 17, options: ['positive', 'neutron'], correct: 'positive' },
                { num: 18, options: ['switches', 'charges'], correct: 'charges' },
                { num: 19, options: ['Electrical', 'Electricity'], correct: 'Electricity' },
                { num: 20, options: ['electrons', 'neutrons'], correct: 'electrons' }
            ];

            const activity6Headings = ['What is electricity?', 'How electricity works.', 'Generating electricity.'];
            const activity6Correct = { para1: 'What is electricity?', para2: 'How electricity works.', para3: 'Generating electricity.' };

            const activity7Questions = [
                { id: 1, question: "What is electricity?", options: ["The flow of electrons", "The flow of water", "The flow of air", "The flow of light"], correct: "The flow of electrons" },
                { id: 2, question: "Where can we see electricity in nature?", options: ["In lightning", "In rain", "In wind", "In snow"], correct: "In lightning" },
                { id: 3, question: "What is lightning?", options: ["Many electrons moving through air", "Water falling from clouds", "Wind blowing fast", "Clouds touching each other"], correct: "Many electrons moving through air" },
                { id: 4, question: "How do scientists send electricity to our homes?", options: ["Through wires", "Through the air", "Through water pipes", "Through the ground"], correct: "Through wires" },
                { id: 5, question: "What does electricity power in the modern world?", options: ["Heaters, light bulbs, and computers", "Only light bulbs", "Only heaters", "Only computers"], correct: "Heaters, light bulbs, and computers" }
            ];

            const checkActivity1 = () => {
                let correct = 0;
                if (activity1Answers.word1 === 'atom') correct++;
                const threeParts = new Set([activity1Answers.word2, activity1Answers.word3, activity1Answers.word4]);
                if (threeParts.size === 3 && ['protons', 'neutrons', 'electrons'].every(w => threeParts.has(w))) correct += 3;
                const nucleusParts = new Set([activity1Answers.word5, activity1Answers.word6]);
                if (nucleusParts.size === 2 && ['protons', 'neutrons'].every(w => nucleusParts.has(w))) correct += 2;
                if (activity1Answers.word7 === 'atom') correct++;
                if (activity1Answers.word8 === 'electrons') correct++;
                if (activity1Answers.word9 === 'Atoms') correct++;
                const percentage = Math.round((correct / 9) * 100);
                setActivity1Score(percentage);
                if (percentage >= 75) {
                    setPoints(points + correct * 5);
                    if (!completedActivities.includes(1)) setCompletedActivities([...completedActivities, 1]);
                }
                setActivity1Checked(true);
            };

            const checkActivity2 = () => {
                let correct = Object.keys(activity2Correct).filter(key => activity2Answers[key] === activity2Correct[key]).length;
                const percentage = Math.round((correct / 3) * 100);
                setActivity2Score(percentage);
                if (percentage >= 75) {
                    setPoints(points + correct * 10);
                    if (!completedActivities.includes(2)) setCompletedActivities([...completedActivities, 2]);
                }
                setActivity2Checked(true);
            };

            const checkActivity3 = () => {
                let correct = activity3Questions.filter(q => activity3Answers[q.num] === q.correct).length;
                const percentage = Math.round((correct / 20) * 100);
                setActivity3Score(percentage);
                if (percentage >= 75) {
                    setPoints(points + correct * 5);
                    if (!completedActivities.includes(3)) setCompletedActivities([...completedActivities, 3]);
                }
                setActivity3Checked(true);
            };

            const checkActivity4 = () => {
                let correct = activity4Blanks.filter((word, idx) => activity4Answers[idx] === word).length;
                const percentage = Math.round((correct / 10) * 100);
                setActivity4Score(percentage);
                if (percentage >= 75) {
                    setPoints(points + correct * 5 + 50);
                    if (!completedActivities.includes(4)) setCompletedActivities([...completedActivities, 4]);
                }
                setActivity4Checked(true);
            };

            const checkActivity6 = () => {
                let correct = Object.keys(activity6Correct).filter(key => activity6Answers[key] === activity6Correct[key]).length;
                const percentage = Math.round((correct / 3) * 100);
                setActivity6Score(percentage);
                if (percentage >= 75) {
                    setPoints(points + correct * 15);
                    if (!completedActivities.includes(5)) setCompletedActivities([...completedActivities, 5]);
                }
                setActivity6Checked(true);
            };

            const checkActivity7 = () => {
                let correct = activity7Questions.filter(q => activity7Answers[q.id] === q.correct).length;
                const percentage = Math.round((correct / 5) * 100);
                setActivity7Score(percentage);
                if (percentage >= 75) {
                    setPoints(points + correct * 10);
                    if (!completedActivities.includes(6)) setCompletedActivities([...completedActivities, 6]);
                }
                setActivity7Checked(true);
            };

            const retryActivity1 = () => { setActivity1Answers({ word1: '', word2: '', word3: '', word4: '', word5: '', word6: '', word7: '', word8: '', word9: '' }); setActivity1Checked(false); setActivity1Score(null); setSelectedBlank1(null); };
            const retryActivity2 = () => { setActivity2Answers({ a: '', b: '', c: '' }); setActivity2Checked(false); setActivity2Score(null); };
            const retryActivity3 = () => { setActivity3Answers({}); setActivity3Checked(false); setActivity3Score(null); };
            const retryActivity4 = () => { setActivity4Answers({}); setActivity4Checked(false); setActivity4Score(null); setShowFlashcards(true); setFlippedCards({}); setSelectedBlank4(null); };
            const retryActivity6 = () => { setActivity6Answers({ para1: '', para2: '', para3: '' }); setActivity6Checked(false); setActivity6Score(null); };
            const retryActivity7 = () => { setActivity7Answers({}); setActivity7Checked(false); setActivity7Score(null); };

            const downloadCertificate = () => {
                const win = window.open('', '', 'width=800,height=600');
                win.document.write(`<!DOCTYPE html><html><head><title>Certificate</title><style>body{font-family:Georgia,serif;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;background:linear-gradient(135deg,#667eea,#764ba2)}.certificate{background:white;padding:60px;border:20px solid #f4d03f;border-radius:20px;text-align:center}.trophy{font-size:80px}h1{color:#7c3aed;font-size:48px;font-weight:bold}.score{font-size:36px;color:#059669;font-weight:bold;margin:30px 0;padding:20px;background:#d1fae5;border-radius:15px}</style></head><body><div class="certificate"><div class="trophy">üèÜ</div><h1>Certificate of Completion</h1><p style="font-size:24px;margin:20px 0;">ESP 0103 - Electric Current - Reading 6</p><div class="score">Final Score: ${points} Points</div><p style="font-size:40px;">‚≠ê ‚≠ê ‚≠ê</p><p style="font-size:18px;margin-top:30px;">Higher Colleges of Technology</p><p style="font-size:14px;color:#666;">Designed by: Nazila Motahari</p></div></body></html>`);
                win.document.close();
                setTimeout(() => win.print(), 250);
            };

            const progressPercentage = (completedActivities.length / 6) * 100;

            const renderBlank1 = (blankKey, widthClass = 'w-24') => {
                const isCorrect = (blankKey === 'word1' && activity1Answers[blankKey] === 'atom') ||
                                 (blankKey === 'word7' && activity1Answers[blankKey] === 'atom') ||
                                 (blankKey === 'word8' && activity1Answers[blankKey] === 'electrons') ||
                                 (blankKey === 'word9' && activity1Answers[blankKey] === 'Atoms') ||
                                 (['word2', 'word3', 'word4'].includes(blankKey) && ['protons', 'neutrons', 'electrons'].includes(activity1Answers[blankKey])) ||
                                 (['word5', 'word6'].includes(blankKey) && ['protons', 'neutrons'].includes(activity1Answers[blankKey]));
                
                let className = 'input-blank ' + widthClass;
                if (selectedBlank1 === blankKey) className += ' selected';
                if (activity1Checked) className += isCorrect ? ' correct' : ' incorrect';
                
                return (
                    <input 
                        type="text" 
                        value={activity1Answers[blankKey] || ''} 
                        onClick={() => {
                            if (!activity1Checked) {
                                if (activity1Answers[blankKey]) {
                                    const newAnswers = {...activity1Answers};
                                    newAnswers[blankKey] = '';
                                    setActivity1Answers(newAnswers);
                                } else {
                                    setSelectedBlank1(blankKey);
                                }
                            }
                        }} 
                        className={className}
                        disabled={activity1Checked} 
                        readOnly 
                    />
                );
            };

            const renderBlank4 = (index, widthClass = 'w-24') => {
                let className = 'input-blank ' + widthClass;
                if (selectedBlank4 === index) className += ' selected';
                if (activity4Checked) className += activity4Answers[index] === activity4Blanks[index] ? ' correct' : ' incorrect';
                
                return (
                    <input 
                        type="text" 
                        value={activity4Answers[index] || ''} 
                        onClick={() => {
                            if (!activity4Checked) {
                                if (activity4Answers[index]) {
                                    const newAnswers = {...activity4Answers}; 
                                    delete newAnswers[index]; 
                                    setActivity4Answers(newAnswers);
                                } else {
                                    setSelectedBlank4(index);
                                }
                            }
                        }} 
                        className={className}
                        disabled={activity4Checked} 
                        readOnly 
                    />
                );
            };

            return (
                <div className="app-container">
                    <div className="max-w">
                        <div className="card">
                            <h1 className="header-title">‚ö° ESP 0103 - Electric Current - Reading 6</h1>
                            <p className="text-sm">Higher Colleges of Technology</p>
                            <p className="text-xs">Designed by: Nazila Motahari</p>
                            <div className="points">{points} points</div>
                            <div className="progress-bar">
                                <div className="progress-fill" style={{ width: `${progressPercentage}%` }}></div>
                            </div>
                            <p className="text-sm" style={{marginTop: '0.5rem'}}>{completedActivities.length}/6 Activities Completed</p>
                            
                            <div className="btn-group">
                                {[1, 2, 3, 4, 5, 6].map((num) => (
                                    <button 
                                        key={num} 
                                        onClick={() => setCurrentActivity(num - 1)} 
                                        className={`btn ${currentActivity === num - 1 ? 'btn-purple' : completedActivities.includes(num) ? 'btn-green' : 'btn-gray'}`}
                                    >
                                        {completedActivities.includes(num) && '‚úì '}Activity {num}
                                    </button>
                                ))}
                            </div>
                            
                            {completedActivities.length === 6 && (
                                <div className="result-box result-success mt-4">
                                    <p style={{fontSize: '1.25rem', fontWeight: '700', color: '#15803d'}}>
                                        üèÜ Congratulations! All Activities Completed!
                                    </p>
                                    <p className="text-green">Total Score: {points} points</p>
                                    <button onClick={downloadCertificate} className="btn btn-green mt-4">
                                        üì• Download Certificate
                                    </button>
                                </div>
                            )}
                        </div>

                        <div className="activity-content">
                            {currentActivity === 0 && (
                                <div>
                                    <h2 className="activity-title">Activity 1: Understanding Atoms</h2>
                                    <div className="section">
                                        <h3 className="font-bold mb-4">Word Bank:</h3>
                                        <div className="word-bank">
                                            {activity1WordBank.map((word, idx) => {
                                                const used = Object.values(activity1Answers).filter(w => w === word).length;
                                                const canUse = used < activity1WordCounts[word];
                                                return (
                                                    <button 
                                                        key={idx} 
                                                        onClick={() => {
                                                            if (canUse && selectedBlank1 !== null) {
                                                                setActivity1Answers({...activity1Answers, [selectedBlank1]: word});
                                                                setSelectedBlank1(null);
                                                            }
                                                        }} 
                                                        className={`word-btn ${canUse ? 'word-available' : 'word-unavailable'}`}
                                                        disabled={activity1Checked || !canUse}
                                                    >
                                                        {word} ({activity1WordCounts[word] - used}/{activity1WordCounts[word]})
                                                    </button>
                                                );
                                            })}
                                        </div>
                                        <button 
                                            onClick={() => {setActivity1Answers({ word1: '', word2: '', word3: '', word4: '', word5: '', word6: '', word7: '', word8: '', word9: '' }); setSelectedBlank1(null);}} 
                                            disabled={activity1Checked}
                                            className="btn btn-red mb-4"
                                        >
                                            Clear All
                                        </button>
                                        <p className="text-lg">
                                            Everything in the universe is made of tiny particles called {renderBlank1('word1', 'w-28')}s. 
                                            An atom has three main parts: {renderBlank1('word2', 'w-28')}, {renderBlank1('word3', 'w-28')}, 
                                            and {renderBlank1('word4', 'w-28')}. The center of an atom is called the nucleus. 
                                            The nucleus contains {renderBlank1('word5', 'w-28')} and {renderBlank1('word6', 'w-28')}. 
                                            Around the outside of the {renderBlank1('word7', 'w-28')}, {renderBlank1('word8', 'w-28')} move 
                                            in orbits. {renderBlank1('word9', 'w-28')} are the building blocks of everything we see.
                                        </p>
                                    </div>
                                    {!activity1Checked ? (
                                        <button onClick={checkActivity1} className="btn btn-purple">Check Answers</button>
                                    ) : (
                                        <div>
                                            <div className={`result-box ${activity1Score >= 75 ? 'result-success' : 'result-warning'}`}>
                                                <p style={{fontSize: '1.25rem', fontWeight: '700'}}>{activity1Score >= 75 ? '‚úì Great job!' : '‚ö† Keep practicing!'}</p>
                                                <p style={{fontSize: '1.125rem'}}>Score: {activity1Score}%</p>
                                                {activity1Score >= 75 && <p className="text-green">+{Math.round(activity1Score / 100 * 9) * 5} points earned!</p>}
                                            </div>
                                            {activity1Score < 75 && (
                                                <button onClick={retryActivity1} className="btn btn-orange mt-4">üîÑ Try Again</button>
                                            )}
                                        </div>
                                    )}
                                </div>
                            )}

                            {currentActivity === 1 && (
                                <div>
                                    <h2 className="activity-title">Activity 2: Particle Charges</h2>
                                    <div className="section-green">
                                        <div className="mb-4">
                                            <label className="font-bold mb-2" style={{display: 'block'}}>a) Which particles have a positive charge?</label>
                                            <select 
                                                value={activity2Answers.a} 
                                                onChange={(e) => setActivity2Answers({...activity2Answers, a: e.target.value})}
                                                disabled={activity2Checked}
                                            >
                                                <option value="">Select an answer...</option>
                                                <option value="protons">Protons</option>
                                                <option value="electrons">Electrons</option>
                                                <option value="Neutrons">Neutrons</option>
                                            </select>
                                            {activity2Checked && (
                                                <p className={activity2Answers.a === activity2Correct.a ? 'text-green font-bold mt-2' : 'text-red font-bold mt-2'}>
                                                    {activity2Answers.a === activity2Correct.a ? '‚úì Correct!' : `‚úó Incorrect. Correct answer: ${activity2Correct.a}`}
                                                </p>
                                            )}
                                        </div>

                                        <div className="mb-4">
                                            <label className="font-bold mb-2" style={{display: 'block'}}>b) Which particles have a negative charge?</label>
                                            <select 
                                                value={activity2Answers.b} 
                                                onChange={(e) => setActivity2Answers({...activity2Answers, b: e.target.value})}
                                                disabled={activity2Checked}
                                            >
                                                <option value="">Select an answer...</option>
                                                <option value="protons">Protons</option>
                                                <option value="electrons">Electrons</option>
                                                <option value="Neutrons">Neutrons</option>
                                            </select>
                                            {activity2Checked && (
                                                <p className={activity2Answers.b === activity2Correct.b ? 'text-green font-bold mt-2' : 'text-red font-bold mt-2'}>
                                                    {activity2Answers.b === activity2Correct.b ? '‚úì Correct!' : `‚úó Incorrect. Correct answer: ${activity2Correct.b}`}
                                                </p>
                                            )}
                                        </div>

                                        <div className="mb-4">
                                            <label className="font-bold mb-2" style={{display: 'block'}}>c) Which particles have no charge?</label>
                                            <select 
                                                value={activity2Answers.c} 
                                                onChange={(e) => setActivity2Answers({...activity2Answers, c: e.target.value})}
                                                disabled={activity2Checked}
                                            >
                                                <option value="">Select an answer...</option>
                                                <option value="protons">Protons</option>
                                                <option value="electrons">Electrons</option>
                                                <option value="Neutrons">Neutrons</option>
                                            </select>
                                            {activity2Checked && (
                                                <p className={activity2Answers.c === activity2Correct.c ? 'text-green font-bold mt-2' : 'text-red font-bold mt-2'}>
                                                    {activity2Answers.c === activity2Correct.c ? '‚úì Correct!' : `‚úó Incorrect. Correct answer: ${activity2Correct.c}`}
                                                </p>
                                            )}
                                        </div>
                                    </div>

                                    {!activity2Checked ? (
                                        <button onClick={checkActivity2} className="btn btn-purple">Check Answers</button>
                                    ) : (
                                        <div>
                                            <div className={`result-box ${activity2Score >= 75 ? 'result-success' : 'result-warning'}`}>
                                                <p style={{fontSize: '1.25rem', fontWeight: '700'}}>{activity2Score >= 75 ? '‚úì Great job!' : '‚ö† Keep practicing!'}</p>
                                                <p style={{fontSize: '1.125rem'}}>Score: {activity2Score}%</p>
                                                {activity2Score >= 75 && <p className="text-green">+{Object.keys(activity2Correct).filter(k => activity2Answers[k] === activity2Correct[k]).length * 10} points earned!</p>}
                                            </div>
                                            {activity2Score < 75 && (
                                                <button onClick={retryActivity2} className="btn btn-orange mt-4">üîÑ Try Again</button>
                                            )}
                                        </div>
                                    )}
                                </div>
                            )}

                            {currentActivity === 2 && (
                                <div>
                                    <h2 className="activity-title">Activity 3: Reading Comprehension</h2>
                                    <p style={{marginBottom: '1rem', color: '#374151'}}>Choose the best word for each blank:</p>
                                    
                                    <div className="section-yellow">
                                        <h3 className="font-bold text-lg mb-4">Paragraph 1: What is electricity?</h3>
                                        <div className="white-bg">
                                            <p className="text-lg" style={{display: 'inline'}}>
                                                {activity3Questions.slice(0, 12).map((q, idx) => {
                                                    const text = [
                                                        ' is the flow of very small things called ',
                                                        '. It can also mean the ',
                                                        ' you get when electrons ',
                                                        ' from place to place. We can see ',
                                                        ' in nature when there is a bolt of ',
                                                        ' in the sky. This is just a large number of ',
                                                        ' moving through air at the same time, making a huge amount of ',
                                                        '. Scientists have also learned how to ',
                                                        ', or make, electricity. This can be controlled and sent through ',
                                                        '. It can then ',
                                                        ' such things as heaters, light bulbs, and computers. Today, electricity ',
                                                        ' most of the energy to run the modern world.'
                                                    ];
                                                    
                                                    return (
                                                        <React.Fragment key={idx}>
                                                            <span className="word-choice">
                                                                {q.options.map((opt, optIdx) => {
                                                                    let className = 'choice-btn';
                                                                    if (activity3Answers[q.num] === opt) className += ' selected';
                                                                    if (activity3Checked && activity3Answers[q.num] === opt) {
                                                                        className = opt === q.correct ? 'choice-btn correct' : 'choice-btn incorrect';
                                                                    }
                                                                    return (
                                                                        <button
                                                                            key={optIdx}
                                                                            onClick={() => setActivity3Answers({...activity3Answers, [q.num]: opt})}
                                                                            disabled={activity3Checked}
                                                                            className={className}
                                                                        >
                                                                            {opt}
                                                                        </button>
                                                                    );
                                                                })}
                                                            </span>
                                                            {text[idx]}
                                                        </React.Fragment>
                                                    );
                                                })}
                                            </p>
                                        </div>

                                        <h3 className="font-bold text-lg mt-8 mb-4">Paragraph 2: How electricity works</h3>
                                        <div className="white-bg">
                                            <p className="text-lg" style={{display: 'inline'}}>
                                                {activity3Questions.slice(12, 20).map((q, idx) => {
                                                    const text = [
                                                        'Everything in the ',
                                                        ' is made of tiny objects called ',
                                                        '. Each one has even smaller particles called protons and electrons. An electron has what is called a ',
                                                        ' charge. A proton has a positive ',
                                                        '. Negative and ',
                                                        ' charges try to pull each other together. However, two positive, or two negative ',
                                                        ', will push each other away. ',
                                                        ' results when ',
                                                        ' are pushed and pulled from atom to atom.'
                                                    ];
                                                    
                                                    return (
                                                        <React.Fragment key={idx}>
                                                            {text[idx]}
                                                            <span className="word-choice">
                                                                {q.options.map((opt, optIdx) => {
                                                                    let className = 'choice-btn';
                                                                    if (activity3Answers[q.num] === opt) className += ' selected';
                                                                    if (activity3Checked && activity3Answers[q.num] === opt) {
                                                                        className = opt === q.correct ? 'choice-btn correct' : 'choice-btn incorrect';
                                                                    }
                                                                    return (
                                                                        <button
                                                                            key={optIdx}
                                                                            onClick={() => setActivity3Answers({...activity3Answers, [q.num]: opt})}
                                                                            disabled={activity3Checked}
                                                                            className={className}
                                                                        >
                                                                            {opt}
                                                                        </button>
                                                                    );
                                                                })}
                                                            </span>
                                                        </React.Fragment>
                                                    );
                                                })}
                                            </p>
                                        </div>
                                    </div>

                                    {!activity3Checked ? (
                                        <button onClick={checkActivity3} className="btn btn-purple">Check Answers</button>
                                    ) : (
                                        <div>
                                            <div className={`result-box ${activity3Score >= 75 ? 'result-success' : 'result-warning'}`}>
                                                <p style={{fontSize: '1.25rem', fontWeight: '700'}}>{activity3Score >= 75 ? '‚úì Great job!' : '‚ö† Keep practicing!'}</p>
                                                <p style={{fontSize: '1.125rem'}}>Score: {activity3Score}%</p>
                                                {activity3Score >= 75 && <p className="text-green">+{activity3Questions.filter(q => activity3Answers[q.num] === q.correct).length * 5} points earned!</p>}
                                            </div>
                                            {activity3Score < 75 && (
                                                <button onClick={retryActivity3} className="btn btn-orange mt-4">üîÑ Try Again</button>
                                            )}
                                        </div>
                                    )}
                                </div>
                            )}

                            {currentActivity === 3 && (
                                <div>
                                    <h2 className="activity-title">Activity 4: Vocabulary & Paragraph</h2>
                                    {showFlashcards ? (
                                        <div>
                                            <h3 className="font-bold mb-4">Study Flashcards (click to flip):</h3>
                                            <div className="grid-2 mb-4">
                                                {vocabularyCards.map((card, idx) => (
                                                    <div 
                                                        key={idx} 
                                                        onClick={() => setFlippedCards({...flippedCards, [idx]: !flippedCards[idx]})} 
                                                        className={flippedCards[idx] ? 'flashcard flipped' : 'flashcard'}
                                                    >
                                                        <div className="flashcard-inner">
                                                            <div className="flashcard-front">
                                                                <p style={{fontSize: '1.5rem', fontWeight: '700'}}>{card.word}</p>
                                                            </div>
                                                            <div className="flashcard-back">
                                                                <p style={{fontSize: '1.25rem', fontWeight: '700', marginBottom: '0.5rem'}}>{card.word}</p>
                                                                <p style={{fontStyle: 'italic'}}>{card.meaning}</p>
                                                                <p style={{fontSize: '1.5rem', marginTop: '0.5rem'}}>{card.arabic}</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                            <button onClick={() => setShowFlashcards(false)} className="btn btn-purple">Continue to Exercise</button>
                                        </div>
                                    ) : (
                                        <div>
                                            <h3 className="font-bold mb-2">Word Bank:</h3>
                                            <div className="word-bank mb-4" style={{padding: '1rem', background: '#f3f4f6', borderRadius: '0.5rem'}}>
                                                {activity4WordBank.map((word, idx) => {
                                                    const used = Object.values(activity4Answers).filter(w => w === word).length;
                                                    const canUse = used < activity4WordCounts[word];
                                                    return (
                                                        <button 
                                                            key={idx} 
                                                            onClick={() => {
                                                                if (canUse && selectedBlank4 !== null) {
                                                                    setActivity4Answers({...activity4Answers, [selectedBlank4]: word});
                                                                    setSelectedBlank4(null);
                                                                }
                                                            }} 
                                                            className={`word-btn ${canUse ? 'word-available' : 'word-unavailable'}`}
                                                            disabled={activity4Checked || !canUse}
                                                        >
                                                            {word}
                                                        </button>
                                                    );
                                                })}
                                            </div>
                                            <button onClick={() => {setActivity4Answers({}); setSelectedBlank4(null);}} disabled={activity4Checked} className="btn btn-red mb-4">Clear All</button>
                                            <div className="section-green">
                                                <h3 className="font-bold mb-4">Paragraph 3: Generating electricity</h3>
                                                <p className="text-lg">
                                                    To bring {renderBlank4(0)} to our homes, large {renderBlank4(1)} create a strong electric {renderBlank4(2)}. This flows through thick {renderBlank4(3)} to our neighborhoods. In our houses, we find wall {renderBlank4(4)} where we can connect our electronics. When you {renderBlank4(5, 'w-28')} a {renderBlank4(6)}, the electricity makes it work. Many household {renderBlank4(7, 'w-32')} need electricity. Inside a generator, a {renderBlank4(8)} moves near a {renderBlank4(9)} of wire to create the flow of electrons.
                                                </p>
                                            </div>
                                            <div className="mt-4" style={{display: 'flex', gap: '1rem'}}>
                                                <button onClick={() => setShowFlashcards(true)} className="btn btn-gray">Review Vocabulary</button>
                                                {!activity4Checked && <button onClick={checkActivity4} className="btn btn-purple">Check Answers</button>}
                                            </div>
                                            {activity4Checked && (
                                                <div>
                                                    <div className={`result-box ${activity4Score >= 75 ? 'result-success' : 'result-warning'}`}>
                                                        <p style={{fontSize: '1.25rem', fontWeight: '700'}}>{activity4Score >= 75 ? '‚úì Great job!' : '‚ö† Keep practicing!'}</p>
                                                        <p style={{fontSize: '1.125rem'}}>Score: {activity4Score}%</p>
                                                        {activity4Score >= 75 && <p className="text-green">+{activity4Blanks.filter((w, i) => activity4Answers[i] === w).length * 5 + 50} points earned!</p>}
                                                    </div>
                                                    {activity4Score < 75 && (
                                                        <button onClick={retryActivity4} className="btn btn-orange mt-4">üîÑ Try Again</button>
                                                    )}
                                                </div>
                                            )}
                                        </div>
                                    )}
                                </div>
                            )}

                            {currentActivity === 4 && (
                                <div>
                                    <h2 className="activity-title">Activity 5: Match Headings</h2>
                                    <div className="section-indigo">
                                        <div className="mb-4">
                                            <h3 className="font-bold mb-2">Paragraph 1:</h3>
                                            <p className="white-bg mb-2">
                                                Electricity is the flow of electrons from one place to another. We can see electricity in nature when lightning strikes. Lightning is when many electrons move through the air all at once. Scientists learned to make electricity and send it through wires. Now we use electricity every day to power heaters, light bulbs, and computers.
                                            </p>
                                            <select 
                                                value={activity6Answers.para1} 
                                                onChange={(e) => setActivity6Answers({...activity6Answers, para1: e.target.value})}
                                                disabled={activity6Checked}
                                            >
                                                <option value="">Select a heading...</option>
                                                {activity6Headings.map((heading, idx) => (
                                                    <option key={idx} value={heading}>{heading}</option>
                                                ))}
                                            </select>
                                            {activity6Checked && (
                                                <p className={activity6Answers.para1 === activity6Correct.para1 ? 'text-green font-bold mt-2' : 'text-red font-bold mt-2'}>
                                                    {activity6Answers.para1 === activity6Correct.para1 ? '‚úì Correct!' : `‚úó Incorrect. Correct answer: ${activity6Correct.para1}`}
                                                </p>
                                            )}
                                        </div>

                                        <div className="mb-4">
                                            <h3 className="font-bold mb-2">Paragraph 2:</h3>
                                            <p className="white-bg mb-2">
                                                Electrons move because they want to balance their charge. Some materials let electrons flow easily through them - we call these conductors. When electrons flow through a wire, we call this an electric current. A battery provides energy to push electrons through a circuit. When you flip a switch, you complete a path for electrons to travel.
                                            </p>
                                            <select 
                                                value={activity6Answers.para2} 
                                                onChange={(e) => setActivity6Answers({...activity6Answers, para2: e.target.value})}
                                                disabled={activity6Checked}
                                            >
                                                <option value="">Select a heading...</option>
                                                {activity6Headings.map((heading, idx) => (
                                                    <option key={idx} value={heading}>{heading}</option>
                                                ))}
                                            </select>
                                            {activity6Checked && (
                                                <p className={activity6Answers.para2 === activity6Correct.para2 ? 'text-green font-bold mt-2' : 'text-red font-bold mt-2'}>
                                                    {activity6Answers.para2 === activity6Correct.para2 ? '‚úì Correct!' : `‚úó Incorrect. Correct answer: ${activity6Correct.para2}`}
                                                </p>
                                            )}
                                        </div>

                                        <div className="mb-4">
                                            <h3 className="font-bold mb-2">Paragraph 3:</h3>
                                            <p className="white-bg mb-2">
                                                To bring power to our homes, large generators create a strong electric current. This flows through thick wires to our neighborhoods. In our houses, we find wall outlets where we can connect our electronics. When you plug in a device, the electricity makes it work. Many household appliances need electricity. Inside a generator, a magnet moves near a coil of wire to create the flow of electrons.
                                            </p>
                                            <select 
                                                value={activity6Answers.para3} 
                                                onChange={(e) => setActivity6Answers({...activity6Answers, para3: e.target.value})}
                                                disabled={activity6Checked}
                                            >
                                                <option value="">Select a heading...</option>
                                                {activity6Headings.map((heading, idx) => (
                                                    <option key={idx} value={heading}>{heading}</option>
                                                ))}
                                            </select>
                                            {activity6Checked && (
                                                <p className={activity6Answers.para3 === activity6Correct.para3 ? 'text-green font-bold mt-2' : 'text-red font-bold mt-2'}>
                                                    {activity6Answers.para3 === activity6Correct.para3 ? '‚úì Correct!' : `‚úó Incorrect. Correct answer: ${activity6Correct.para3}`}
                                                </p>
                                            )}
                                        </div>
                                    </div>

                                    {!activity6Checked ? (
                                        <button onClick={checkActivity6} className="btn btn-purple">Check Answers</button>
                                    ) : (
                                        <div>
                                            <div className={`result-box ${activity6Score >= 75 ? 'result-success' : 'result-warning'}`}>
                                                <p style={{fontSize: '1.25rem', fontWeight: '700'}}>{activity6Score >= 75 ? '‚úì Great job!' : '‚ö† Keep practicing!'}</p>
                                                <p style={{fontSize: '1.125rem'}}>Score: {activity6Score}%</p>
                                                {activity6Score >= 75 && <p className="text-green">+{Object.keys(activity6Correct).filter(k => activity6Answers[k] === activity6Correct[k]).length * 15} points earned!</p>}
                                            </div>
                                            {activity6Score < 75 && (
                                                <button onClick={retryActivity6} className="btn btn-orange mt-4">üîÑ Try Again</button>
                                            )}
                                        </div>
                                    )}
                                </div>
                            )}

                            {currentActivity === 5 && (
                                <div>
                                    <h2 className="activity-title">Activity 6: Comprehension Quiz</h2>
                                    <div className="section-teal">
                                        {activity7Questions.map((q) => (
                                            <div key={q.id} className="white-bg mb-4">
                                                <p className="font-bold mb-2">{q.id}. {q.question}</p>
                                                {q.options.map((opt, idx) => {
                                                    let className = 'quiz-option';
                                                    if (activity7Answers[q.id] === opt) className += ' selected';
                                                    if (activity7Checked && activity7Answers[q.id] === opt) {
                                                        className = opt === q.correct ? 'quiz-option correct' : 'quiz-option incorrect';
                                                    }
                                                    return (
                                                        <button
                                                            key={idx}
                                                            onClick={() => setActivity7Answers({...activity7Answers, [q.id]: opt})}
                                                            disabled={activity7Checked}
                                                            className={className}
                                                        >
                                                            {opt}
                                                        </button>
                                                    );
                                                })}
                                                {activity7Checked && activity7Answers[q.id] !== q.correct && (
                                                    <p className="text-red font-bold mt-2">Correct answer: {q.correct}</p>
                                                )}
                                            </div>
                                        ))}
                                    </div>

                                    {!activity7Checked ? (
                                        <button onClick={checkActivity7} className="btn btn-purple">Check Answers</button>
                                    ) : (
                                        <div>
                                            <div className={`result-box ${activity7Score >= 75 ? 'result-success' : 'result-warning'}`}>
                                                <p style={{fontSize: '1.25rem', fontWeight: '700'}}>{activity7Score >= 75 ? '‚úì Great job!' : '‚ö† Keep practicing!'}</p>
                                                <p style={{fontSize: '1.125rem'}}>Score: {activity7Score}%</p>
                                                {activity7Score >= 75 && <p className="text-green">+{activity7Questions.filter(q => activity7Answers[q.id] === q.correct).length * 10} points earned!</p>}
                                            </div>
                                            {activity7Score < 75 && (
                                                <button onClick={retryActivity7} className="btn btn-orange mt-4">üîÑ Try Again</button>
                                            )}
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>

                        <div className="nav-buttons">
                            <button 
                                onClick={() => setCurrentActivity(Math.max(0, currentActivity - 1))} 
                                disabled={currentActivity === 0}
                                className="btn btn-gray"
                            >
                                ‚Üê Previous
                            </button>
                            <button 
                                onClick={() => {setCurrentActivity(0); setPoints(0); setCompletedActivities([]); retryActivity1(); retryActivity2(); retryActivity3(); retryActivity4(); retryActivity6(); retryActivity7();}}
                                className="btn btn-red"
                            >
                                üîÑ Reset All
                            </button>
                            <button 
                                onClick={() => setCurrentActivity(Math.min(5, currentActivity + 1))} 
                                disabled={currentActivity === 5}
                                className="btn btn-purple"
                            >
                                Next ‚Üí
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<ElectricCurrentLesson />, document.getElementById('root'));
    </script>
</body>
</html>
